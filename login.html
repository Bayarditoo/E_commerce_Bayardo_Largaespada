<!DOCTYPE html>
<script>
    // Verificaci칩n inicial de autenticaci칩n
    const autenticado = () => {
        if (localStorage.getItem("email")) {
            location.href = "./index.html"; // Redirige si ya est치 logueado
        }
    };
    autenticado(); // Se ejecuta para redirigir si ya est치 autenticado
</script>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <style>
        body {
            display: grid;
            place-items: center;
            height: 100dvh;
        }
    </style>
    <title>Eccomerce Login</title>
</head>

<body id="login">
    <form class="loginForm">
        <div class="mb-3">
            <label class="form-label">Email address</label>
            <input type="email" class="form-control" name="email" />
        </div>
        <div class="mb-3">
            <label class="form-label">Password</label>
            <input type="password" class="form-control" name="password" />
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
        <p id="formLoginMessage" class="poppings-light"></p>
    </form>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const userLogin = { email: "bayardo@gmail.com", password: "1234" };
            const message = document.querySelector("#formLoginMessage");
            const form = document.querySelector(".loginForm"); // Cambiado a ".loginForm" (por clase)

            if (form) {
                form.addEventListener("submit", (e) => {
                    e.preventDefault();
                    const emailInput = e.target.elements.email.value;
                    const passwordInput = e.target.elements.password.value;

                    if (
                        emailInput === userLogin.email &&
                        passwordInput === userLogin.password
                    ) {
                        localStorage.setItem("email", emailInput);
                        localStorage.setItem("cart", JSON.stringify([]));
                        localStorage.setItem("quantity", "0");
                        location.href = "index.html";
                        if (message) message.innerText = "";
                    } else {
                        if (message) message.innerText = "Pone los datos bien bruto 游뱗.";
                    }
                });
            }
        });
    </script>
</body>

</html>